@using System.Web.Optimization
@model POC.Models.Discussion
@{
    if (string.IsNullOrWhiteSpace(Model.UserWhoStartedChat)) {
        Model.UserWhoStartedChat = "";
    }

}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sentient Clinical System (Mock Up) Chat</title>
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/bootstrap")
        @Scripts.Render("~/bundles/common")
        <script src="~/Scripts/jquery.signalR-2.2.0.js"></script>
        <script src="~/signalr/hubs"></script>
    </head>
    <body>
        <div class="body-content-chat">
            @Html.HiddenFor(a => Model.RoomId)
            @Html.HiddenFor(a => Model.Users)
            @Html.HiddenFor(a => Model.LoggedInUser)
            <div id="connectionid"></div>
            <div>
                @foreach (var user in Model.Users)
                {
                    @Html.Label(user.Description, new {@class = "control-label"})
                    <span>&nbsp;</span>
                }
            </div>
            <hr/>
            <div style="height: 400px; overflow-y: scroll;">
                <ul id="discussion"></ul>
            </div>
            <div>
                @Html.TextArea("message", new { @class = "form-control" })
                <input type="button" id="send" class="btn btn-primary" value="Send"/>
            </div>
        </div>
    </body>
</html>
<script type="text/javascript">
    $(document).ready(function () {
        sentientPOC.discussion.initialize(
            "@Model.RoomId",
            "@Model.UserList",
            "@Model.UserWhoStartedChat",
            "@Model.StartChatDateTime",
            "@Model.LoggedInUser",
            "@Model.UserWhoRejoinedChat");
    });
</script>
